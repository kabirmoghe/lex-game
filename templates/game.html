<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"/>
	<meta name="theme-color" content="#D5D5D5">
	<title>Lex</title>
	<link rel="stylesheet" type="text/css" href="{{url_for('static', filename = 'dark.css', v=lid)}}">
	<link rel="stylesheet" type="text/css" href="{{url_for('static', filename = 'light.css', v=lid)}}">
	<link rel="preconnect" href="https://fonts.googleapis.com">
	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link href="https://fonts.googleapis.com/css2?family=Oxygen:wght@400;700&display=swap" rel="stylesheet">
	<link href="https://fonts.googleapis.com/css2?family=Oswald&display=swap" rel="stylesheet">
	<link href="https://fonts.googleapis.com/css2?family=Courier+Prime:wght@400;500;600;700&display=swap" rel="stylesheet">
	<link href="https://fonts.googleapis.com/css2?family=Roboto+Slab:wght@400;700&display=swap" rel="stylesheet">

	<link rel="shortcut icon" href="{{ url_for('static', filename = 'favicon.ico') }}">
</head>
<body>
	<div id="completeOverlay"></div>
	<div class="overlay" id="infoOverlay">
		<div class="popUpBox" id="playInfo">
			<div class="close">
				<button id="closePlayInfo" type="button">✕</button>
			</div>
			<div class="popUp" id="playInfoDetails">
				<p class="head">How to play...</p>

				<p>Given 10 guesses and 8 letters, find the 5 highest-scoring words. Words must be at least 3 letters long and can repeat letters. Point values are assigned as following:
				<br>
				<br>

				<!-- ALL LETTERS -->

				<img class="letterExplained" src="{{url_for('static', filename = 'a.svg')}}">
				<img class="letterExplained" src="{{url_for('static', filename = 'b.svg')}}">
				<img class="letterExplained" src="{{url_for('static', filename = 'c.svg')}}">
				<img class="letterExplained" src="{{url_for('static', filename = 'd.svg')}}">
				<img class="letterExplained" src="{{url_for('static', filename = 'e.svg')}}">
				<img class="letterExplained" src="{{url_for('static', filename = 'f.svg')}}">
				<img class="letterExplained" src="{{url_for('static', filename = 'g.svg')}}">
				<img class="letterExplained" src="{{url_for('static', filename = 'h.svg')}}">
				<img class="letterExplained" src="{{url_for('static', filename = 'i.svg')}}">
				<img class="letterExplained" src="{{url_for('static', filename = 'j.svg')}}">
				<img class="letterExplained" src="{{url_for('static', filename = 'k.svg')}}">
				<img class="letterExplained" src="{{url_for('static', filename = 'l.svg')}}">
				<img class="letterExplained" src="{{url_for('static', filename = 'm.svg')}}">
				<img class="letterExplained" src="{{url_for('static', filename = 'n.svg')}}">
				<img class="letterExplained" src="{{url_for('static', filename = 'o.svg')}}">
				<img class="letterExplained" src="{{url_for('static', filename = 'p.svg')}}">
				<img class="letterExplained" src="{{url_for('static', filename = 'q.svg')}}">
				<img class="letterExplained" src="{{url_for('static', filename = 'r.svg')}}">
				<img class="letterExplained" src="{{url_for('static', filename = 's.svg')}}">
				<img class="letterExplained" src="{{url_for('static', filename = 't.svg')}}">
				<img class="letterExplained" src="{{url_for('static', filename = 'u.svg')}}">
				<img class="letterExplained" src="{{url_for('static', filename = 'v.svg')}}">
				<img class="letterExplained" src="{{url_for('static', filename = 'w.svg')}}">
				<img class="letterExplained" src="{{url_for('static', filename = 'x.svg')}}">
				<img class="letterExplained" src="{{url_for('static', filename = 'y.svg')}}">
				<img class="letterExplained" src="{{url_for('static', filename = 'z.svg')}}">


				<br><br>
				<!--If you guess 1 of the 5 highest-scoring words, the word will show up as purple.-->Your five best guesses determine your score and are displayed above the keyboard. If you want to see all of your guesses, click the button at the top left.<br><br>

				<span class="best">Jump, 15</span>
				<span class="correct">Plume, 9</span>
				<span class="correct">Hum, 8</span>

				<br><br>

				If you aren't able to find the best words, no worries! You'll be able to see them next day.

				<br><br>
				</p>
			</div>
		</div>
	</div>
	<div class="overlay" id="overOverlay">
		<div class="popUpBox" id="overInfo">
			<div class="close">
				<button id="closeOverInfo" type="button">✕</button>
			</div>
			<div class="popUp" id="overInfoDetails">
				<div class="content" id="finished">
					<div id="finishedTop" class="newLex">NEW LEX</div>
					<div id="countdown2" class="countdown"></div>
					<br><br>
					<p id="scoreFinal"></p>
				    <input type="image" id="share" value="share" src="{{url_for('static', filename = 'share.svg')}}" onclick='shareData()' onfocus="this.blur();">
				    <div class="overlay" id="shareOverlay">
						<div class="shareBox" id="shareDisplay">
							<div class="shareInner" id="shareDetails">
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
	<span id="showSlide" onclick="openNav()"><span id="wordCheck"></span></span>
	<div id="all">
		<!-- NON FEEDBACK (LOGIN)
		<div class="top">
			<div id="title">LEX</div>
			<div class="more" id="moreID"><button class="revealMore" id="moreInfo" type="button" onfocus="this.blur();">More</button></div>
			<div class="more" id="additionalInfo">
				<div class="close"><button id="closeAllInfo" type="button">✕</button></div>
				<div id="info"><button id="showInfo" class="revealEvenMore" type="button" onfocus="this.blur();">How to Play</button></div>
				<div id="yesterday"><button id="showYesterday" class="revealEvenMore" type="button" onfocus="this.blur();">Yesterday</button></div>
				<div id="login"><a class="revealEvenMore" href="{{ url_for('login') }}">Log In</a></div>
			</div>
		</div>
	    -->
	    <div id="topContainer">
		    <div class="top">
				<div id="title">LEX</div>
				<div class="shareIcon" id="shareID"><img id="shareIconInner" src="{{url_for('static', filename='shareIcon.svg')}}"></div>
				<div class="more" id="moreID"><img id="moreButton" src="{{url_for('static', filename='more.svg')}}"></div>
				<div class="more" id="additionalInfo">
					<div class="close"><button id="closeAllInfo" type="button">✕</button></div>
					<div id="info"><button id="showInfo" class="revealEvenMore" type="button" onfocus="this.blur();">How to Play</button></div>
					<div id="yesterday"><button id="showYesterday" class="revealEvenMore" type="button" onfocus="this.blur();">Yesterday</button></div>
					<div id="login"><a class="revealEvenMore" href="{{ url_for('feedback') }}" target="_blank">Feedback</a></div>
				</div>
			</div>
		</div>
		<div id="mainContent">
			<div id="myNav" class="slideIn">
				<div id="switch">
					<label class="switch">
					  <input type="checkbox" id="mode">
					  <span class="slider round"></span>
					</label> &nbsp;
					<span id="darkMode">Dark Mode</span>
				</div>
			  	<div class="close">
				    <button id="closeNav" type="button">✕</button>
			    </div>

			  <!-- Button to close the overlay navigation -->
			  <!-- Overlay content -->
			  <div id="navContent" class="slideIn-content" style="max-width:500px;">
					<div id="sideWordBox" class="wordsDisplayed">
						<div class="newLex">NEW LEX</div>
						<div id="countdown1" class="countdown"></div> <br><br>
						<p id="guessesHeader" class="head">Guesses</p>
						<div id="guessesLeft" class="smallSubhead"></div>
						<div id="wordsSideOnly">
						</div>
					</div>
			  </div>
			</div>
			<div class="overlay" id="yesterdayOverlay">
				<div class="sideBox" id="yesterdayInfo">
					<div class="close">
						<button id="closeYesterday" type="button">✕</button>
					</div>
					<div class="popUp" id="yesterdayDetails">
						<p class="head">Yesterday</p>
						<p>Here are yesterday's best acceptable words with a max score of <span id="yesterdayMax" class=maxPoints></span>:<br></p>
						<div class="wordsDisplayed" id="yesterdayWords">
						</div>
						<p><br>How many did you find?</p>
					</div>
				</div>
			</div>
			<div class="content">

				<p id="guessPrompt">Get <span class="maxPoints">{{maxPoints}}</span> points to become today's <span class="maxPoints">Champ!</span></p>

				<p>

					<div class="formContents">
						<div class="tile" id="1" onfocus="blur();"></div>
						<div class="tile" id="2" onfocus="blur();"></div>
						<div class="tile" id="3" onfocus="blur();"></div>
						<div class="tile" id="4" onfocus="blur();"></div>
						<div class="tile" id="5" onfocus="blur();"></div>

						<!--
						<input class="tile" onClick="this.select();" type="text" name="1" id="1" required maxlength="1" autofocus="autofocus"autocomplete="off" onfocus="blur();">
						<input class="tile" onClick="this.select();" type="text" name="2" id="2" required maxlength="1" autocomplete="off" onfocus="blur();">
						<input class="tile" onClick="this.select();" type="text" name="3" id="3" required maxlength="1" autocomplete="off" onfocus="blur();">
						<input class="tile" onClick="this.select();" type="text" name="4" id="4" maxlength="1" autocomplete="off" onfocus="blur();">
						<input class="tile" onClick="this.select();" type="text" name="5" id="5" maxlength="1" autocomplete="off" onfocus="blur();">-->
					</div>
				</p>
				<p class="error"><em><span id="errorMsg"></span>&nbsp;</em></p>
			</div>
			<br>
			<div class='gauge'>
					<span id="slide">{{slide}}</span><br>
					<img id="scoreArrow" src="{{url_for('static', filename='score_arrow.svg')}}">
					<img id="score_gauge" src="{{url_for('static', filename = 'score_gauge.svg')}}"> &nbsp; &nbsp; <span id="tally" class="tally">{{score}}</span>
			</div>
		  	<div class="content" style="max-width:500px;">
		  		<br><br>
				<div id="wordBox" class="wordsDisplayed">
				</div>
			</div>
		</div>
		<div class="keyBoard">
			<div class="keyWidth">
			 	<div class="keyRow"><!--
					{% for letter in letters %}
						<input type="image" value="{{letter}}" src="{{url_for('static', filename = letter+'.svg')}}" onclick="document.getElementById(activeTile()).value = $(this).val()" onfocus="this.blur();">
					{% endfor %}-->
				</div>
				<div class="otherActions">
					<input type="image" id="shuffle" value="shuffle" src="{{url_for('static', filename = 'shuffle.svg')}}" onfocus="this.blur();">
					<input type="image" id="next" src="{{url_for('static', filename = 'guess.svg')}}" onfocus="this.blur();">
					<input type="image" id="del" value="⌫" src="{{url_for('static', filename = 'del.svg')}}" onclick="del();" onfocus="this.blur();">
					<!--<input type="image" id="done" value="done" src="{{url_for('static', filename = 'giveUp.svg')}}" onfocus="this.blur();">-->
				</div>
			</div>
		</div>
	</div>

	<!-- SCRIPTS -->

	<!-- GAME CODE -->

	<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>

	<script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.11.1/jquery-ui.min.js"></script>
	<script type="text/javascript">

			/* function that returns the response to be displayed, to-send message, and slider message */

			function gaugeScore(pts, top){

				let response = "";
			    let level = pts+'/'+top;
			    let slide="";

			    if (pts == top) {
			        response = "You're the champ!";
			        level = "Champ! 🟣 " + pts + "/" + top;
			        slide = "Champ!" ;
			    } else if (pts >= 0.8*top) {
			        response = "Amazing!";
			        level = "Amazing! 🔵 " + pts + "/" + top;
			        slide = "Amazing!" ;
				} else if (pts >= 0.6*top) {
			        response = "Wow!";
			        level = "Wow! 🟢 " + pts + "/" + top;
			        slide = "Wow! ";
			    } else if (pts >= 0.4*top) {
			        response = "Great!";
			        level = "Great! ⚪️ " + pts + "/" + top;
			        slide = "Great! ";
			    } else if (pts >= 0.2*top) {
			        response = "Good!";
			        level = "Good! 🟡 " + pts + "/" + top;
			        slide = "Good! ";
			    } else if (pts > 0) {
			        response = "Nice!";
			        level = "Nice! 🟠 " + pts + "/" + top;
			        slide = "Nice! ";
				}

				return [response, level, slide];
			}

			function shareScore(pts, top, numBest){

				  let response = "";
					let level = "\n\n" + pts+'/'+top;
					let slide="";

					let wordBestDisplay = ""


					for (let i = 0; i < numBest; i++) {
	  				wordBestDisplay+="🟪";
					}

					for (let i = 0; i < 5-numBest; i++){
						wordBestDisplay+="⬜";
					}

					if (pts == top) {
							response = "You're the champ!";
							level = "\n\nChamp! " + pts + "/" + top;
							slide = "Champ!" ;
					} else if (pts >= 0.8*top) {
							response = "Amazing!";
							level = "\n\nAmazing! " + pts + "/" + top;
							slide = "Amazing!" ;
				} else if (pts >= 0.6*top) {
							response = "Wow!";
							level = "\n\nWow! " + pts + "/" + top;
							slide = "Wow! ";
					} else if (pts >= 0.4*top) {
							response = "Great!";
							level = "\n\nGreat! " + pts + "/" + top;
							slide = "Great! ";
					} else if (pts >= 0.2*top) {
							response = "Good!";
							level = "\n\nGood! " + pts + "/" + top;
							slide = "Good! ";
					} else if (pts > 0) {
							response = "Nice!";
							level = "\n\nNice! " + pts + "/" + top;
							slide = "Nice! ";
				  }

				level += "\n"+wordBestDisplay;

				return [response, level, slide];
			}
	</script>

	<script type="text/javascript">

		var timeout = null;

		function clearLight() {
			$('#1')
				.css('border-color', '#BDBCBC')
				.text("");
			$('#2')
				.css('border-color', '#BDBCBC')
				.text("");
			$('#3')
				.css('border-color', '#BDBCBC')
				.text("");
			$('#4')
				.css('border-color', '#BDBCBC')
				.text("");
			$('#5')
				.css('border-color', '#BDBCBC')
				.text("");
		}

		function clearDark() {
			$('#1')
				.css('border-color', '#808080')
				.text("");
			$('#2')
				.css('border-color', '#808080')
				.text("");
			$('#3')
				.css('border-color', '#808080')
				.text("");
			$('#4')
				.css('border-color', '#808080')
				.text("");
			$('#5')
				.css('border-color', '#808080')
				.text("");
			}

		$(document).ready(function(){


			if ("mode" in localStorage){
				mode = localStorage.getItem('mode');
				if (mode == "dark"){
					$('link[href*="dark.css"]').prop('disabled', false);
					$('link[href*="light.css"]').prop('disabled', true);
					document.querySelector('meta[name="theme-color"]').setAttribute('content',  '#303133');
					$("div#switch input[type='checkbox']").attr('checked','checked')
				}
				else {
					$('link[href*="light.css"]').prop('disabled', false);
					$('link[href*="dark.css"]').prop('disabled', true);
					document.querySelector('meta[name="theme-color"]').setAttribute('content',  '#D5D5D5');
				}
			}
			else {
				$('link[href*="light.css"]').prop('disabled', false);
				$('link[href*="dark.css"]').prop('disabled', true);
				localStorage.setItem('mode', 'light');
			}

			$("#mode").click(function(){
				mode = localStorage.getItem('mode');
				if (mode == "light"){
					$('link[href*="dark.css"]').prop('disabled', false);
					$('link[href*="light.css"]').prop('disabled', true);
					document.querySelector('meta[name="theme-color"]').setAttribute('content',  '#303133');

					for (let i = 0; i <=5; i++){
						$("#"+i).css('border-color', '#808080');
					}


					let j = 1;
					while (j < active()){
						$("#"+j).css('border-color', '#BDBCBC');
						j++;
					}

					if ($("#5").text().length == 1){
						$("#5").css('border-color', '#BDBCBC');
					}
					localStorage.setItem('mode', 'dark');
				}
				else {
					$('link[href*="light.css"]').prop('disabled', false);
					$('link[href*="dark.css"]').prop('disabled', true);
					document.querySelector('meta[name="theme-color"]').setAttribute('content',  '#D5D5D5');


					for (let i = 0; i <=5; i++){
						$("#"+i).css('border-color', '#BDBCBC');
					}


					let j = 1;
					while (j < active()){
						$("#"+j).css('border-color', 'black');
						j++;
					}

					if ($("#5").text().length == 1){
						$("#5").css('border-color', 'black');
					}

					localStorage.setItem('mode', 'light');
				}

			})

			function sortingGuesses(guess1, guess2) {
				if (possWords[guess1] > possWords[guess2]) {
					return -1;
				}
				else if (possWords[guess1] < possWords[guess2]) {
					return 1;
				}
				else {
					if (guess1.name > guess2.name){
						return -1;
					}
					else {
						return 1;
					}
				}
			}

			/* Define all constant variables */

			var letters = (JSON.stringify({{letters | tojson}}));
			localStorage.setItem('letters', letters);

			function addLetters() {
				let curr = JSON.parse(localStorage.getItem('letters'));

				$(".keyRow").text("");

				for (let i = 0; i < 8; i++){
						let letter = String(curr[i]).valueOf();
						let file = letter+".svg";
						let srcStr ="{{url_for('static', filename = '')}}"+file;
						let str = '<input class="letterTile" type="image" value="'+letter+'" onclick="keyActiveTile($(this).val())" onfocus="this.blur();" src="'+srcStr+'"> ';
						$(".keyRow").append(str)
				}

				$(".keyRow").hide().fadeIn();
			}

			addLetters();

			$("#shuffle").click(function() {

				let letters = JSON.parse(localStorage.getItem('letters'));

				let shuffled = letters
				  .map(value => ({ value, sort: Math.random() }))
				  .sort((a, b) => a.sort - b.sort)
				  .map(({ value }) => value)

				localStorage.setItem('letters', JSON.stringify(shuffled));

				$(".letterTile").fadeOut("fast");

				setTimeout(function() {addLetters()}, 100);
			});

			localStorage.setItem('letterPts', {{letterPts | safe}});
			localStorage.setItem('maxPoints', {{maxPoints | safe}});

			if ({{lid | tojson}} != localStorage.getItem('lid')) {
				localStorage.setItem('guesses', JSON.stringify([]));
				localStorage.setItem('score', 0);
				localStorage.setItem('status', 'not done');
				/*var letters = (JSON.stringify({{letters | tojson}}));
				localStorage.setItem('letters', letters);	*/
			}

			localStorage.setItem('numAdd', {{numAdd}});
			localStorage.setItem('lid', {{lid | tojson}});

			/* Create changing UI for user */
			var score = parseInt(localStorage.getItem('score'));
			var maxPoints = parseInt((localStorage.getItem('maxPoints')));
			var scorePos = (74.5*score/maxPoints).toFixed(2);
			var guesses = JSON.parse(localStorage.getItem('guesses'));
			var possWords = JSON.parse({{possWords | tojson}});
			var bestWords = JSON.parse({{bestWords | tojson}});
			var topBest = JSON.parse({{topBest | tojson}});

			var slide = gaugeScore(score, maxPoints)[2];
		    guesses = guesses.sort(sortingGuesses);
			$("#scoreArrow").css('marginLeft', scorePos+'%');
			$("#slide").css('marginLeft', scorePos+'%');
			$("#tally").text(score);
			$("#wordCheck").text(10-JSON.parse(localStorage.getItem('guesses')).length);
			$("#slide").text(slide);
			$("#yesterdayMax").text({{oldMaxPoints}});

			var oldBestWords = JSON.parse({{oldBestWords | tojson}});
			var oldBestWordsOnly = {{oldBestWordsOnly | tojson}};
			oldBestWordsOnly.forEach((word) => {
				$("#yesterdayWords").append("<span class='best'>"+word+', '+oldBestWords[word]+'</span> ');
			});

			// EDITS BOX OF WORDS ON MAIN SCREEN
			if (guesses.length > 5){

				let numAdd = parseInt(localStorage.getItem('numAdd'));

				for (let i = 0; i < 5; i++){
					var guess = guesses[i];

					if (guess in topBest) {
						$("#wordBox").append("<span class='best'>"+guess+', '+possWords[guess]+'</span> ');
					}
					else if ((guess in bestWords) && (numAdd > 0)) {
						$("#wordBox").append("<span class='best'>"+guess+', '+possWords[guess]+'</span> ');
						numAdd -= 1;
					}
					else {
						$("#wordBox").append("<span class='correct'>"+guess+', '+possWords[guess]+'</span> ');
					}
				}
			}
			else {

				let numAdd = parseInt(localStorage.getItem('numAdd'));

				guesses.forEach((guess) => {
					if (guess in topBest) {
						$("#wordBox").append("<span class='best'>"+guess+', '+possWords[guess]+'</span> ');
					}
					else if ((guess in bestWords) && (numAdd > 0)) {
						$("#wordBox").append("<span class='best'>"+guess+', '+possWords[guess]+'</span> ');
						numAdd -= 1;
					}
					else {
						$("#wordBox").append("<span class='correct'>"+guess+', '+possWords[guess]+'</span> ');
					}
				});
			}

			if (guesses.length == 0){
				$("#wordsSideOnly").append('');
			}

			// EDITS SIDE BOX OF WORDS
			let i = 0;
			let numAdd = parseInt(localStorage.getItem('numAdd'));
			guesses.forEach((guess) => {
				if (i < 5){

					if (guess in topBest) {
						$("#wordsSideOnly").append("<span class='best'>"+guess+', '+possWords[guess]+' <span class="check">★</span>'+'</span> ');
					}
					else if ((guess in bestWords) && (numAdd > 0)) {
						$("#wordsSideOnly").append("<span class='best'>"+guess+', '+possWords[guess]+' <span class="check">★</span>'+'</span> ');
						numAdd -= 1;
					}
					else {
						$("#wordsSideOnly").append("<span class='correct'>"+guess+', '+possWords[guess]+' <span class="check">★</span>'+'</span> ');
					}
					i++;
				}
				else {
					$("#wordsSideOnly").append("<span class='correct'>"+guess+', '+possWords[guess]+'</span> ');
				}
			});

			if (localStorage.getItem('status') == 'Done') {

	       		var maxPoints = parseInt(localStorage.getItem('maxPoints'));
		        var response = gaugeScore(score, maxPoints)[0];

		        $(".shareIcon")
		        	.css('display', 'inline-block')
		        	.hide()
		        	.fadeIn("fast");
				$("#guessesLeft").text('0 LEFT');
				$("#wordCheck").text("✓");
				$(".keyBoard input").css('pointer-events', 'none');
				$("#completeOverlay").delay(1000).fadeIn("slow");
		        $("#overOverlay")
		        	.css('display', 'flex')
		        	.hide()
		        	.delay(1000)
		        	.fadeIn("slow");
		        $("#scoreFinal").text(response + ' You scored ' + score + ' points.');
			}

			else {

				$("#completeOverlay").fadeIn("fast");
				$("#infoOverlay")
				  .delay(1000)
					.css('display', 'flex')
					.hide()
					.fadeIn("fast");

				$("#guessesLeft").text(''+(10-JSON.parse(localStorage.getItem('guesses')).length)+' LEFT');
				$("#wordCheck").text(10-JSON.parse(localStorage.getItem('guesses')).length);

				// Game

				$("#next").click(function(){

				    	if (active() > 3){
				    		var guess = $('#1').text() + $('#2').text() + $('#3').text() + $('#4').text() + $('#5').text();

				    		var possWords = JSON.parse({{possWords | tojson}});
				    		var bestWords = JSON.parse({{bestWords | tojson}});

				    		if (guess in possWords) {
				    			var guesses = JSON.parse(localStorage.getItem('guesses'));

				    			console.log(localStorage.getItem('status'));

			    				if (guesses.length == 0){
				    				if (localStorage.getItem('mode') == "light"){
											clearLight();
				    				}
				    				else {
											clearDark();
				    				}


			    					guesses.push(guess);
			    					guesses = guesses.sort(sortingGuesses);
				    				localStorage.setItem('guesses', JSON.stringify(guesses));

				    				var score = 0;

				    				if (guesses.length > 5) {
				    					for (let i = 0; i < 5; i++){
				    						let guess = guesses[i];
				    						score += possWords[guess];
				    					}
				    				}
				    				else {
				    					guesses.forEach((guess) => {
				    						score += possWords[guess];
				    					})
				    				}

				    				localStorage.setItem('score', score);
									var scorePos = (74.5*score/maxPoints).toFixed(2);
									var slide = gaugeScore(score, maxPoints)[2];


									$("#scoreArrow").animate({'marginLeft': scorePos+'%'}, "slow");
									$("#slide").animate({'marginLeft': scorePos+'%'}, "slow");
									$("#tally").text(score);
									$("#wordCheck").text(10-guesses.length);
									$("#slide").text(slide);

									$("#wordBox").text("");
									// EDITS BOX OF WORDS ON MAIN SCREEN
									if (guesses.length > 5){

										let numAdd = parseInt(localStorage.getItem('numAdd'));

										for (let i = 0; i < 5; i++){
											var guess = guesses[i];
											if (guess in topBest) {
												$("#wordBox").append("<span class='best'>"+guess+', '+possWords[guess]+'</span> ');
											}
											else if ((guess in bestWords) && (numAdd > 0)) {
												$("#wordBox").append("<span class='best'>"+guess+', '+possWords[guess]+'</span> ');
												numAdd -= 1;
											}
											else {
												$("#wordBox").append("<span class='correct'>"+guess+', '+possWords[guess]+'</span> ');
											}
										}
									}
									else {

										let numAdd = parseInt(localStorage.getItem('numAdd'));

										guesses.forEach((guess) => {
											if (guess in topBest) {
												$("#wordBox").append("<span class='best'>"+guess+', '+possWords[guess]+'</span> ');
											}
											else if ((guess in bestWords) && (numAdd > 0)) {
												$("#wordBox").append("<span class='best'>"+guess+', '+possWords[guess]+'</span> ');
												numAdd -= 1;
											}
											else {
												$("#wordBox").append("<span class='correct'>"+guess+', '+possWords[guess]+'</span> ');
											}
										});
									}

									$("#wordsSideOnly").text("");

									// EDITS SIDE BOX OF WORDS
									let i = 0;
									let numAdd = parseInt(localStorage.getItem('numAdd'));
									guesses.forEach((guess) => {
										if (i < 5){

											if (guess in topBest) {
												$("#wordsSideOnly").append("<span class='best'>"+guess+', '+possWords[guess]+' <span class="check">★</span>'+'</span> ');
											}
											else if ((guess in bestWords) && (numAdd > 0)) {
												$("#wordsSideOnly").append("<span class='best'>"+guess+', '+possWords[guess]+' <span class="check">★</span>'+'</span> ');
												numAdd -= 1;
											}
											else {
												$("#wordsSideOnly").append("<span class='correct'>"+guess+', '+possWords[guess]+' <span class="check">★</span>'+'</span> ');
											}
											i++;
										}
										else {
											$("#wordsSideOnly").append("<span class='correct'>"+guess+', '+possWords[guess]+'</span> ');
										}
									});

									$("#guessesLeft").text(''+(10-JSON.parse(localStorage.getItem('guesses')).length)+' LEFT');
			    				}

				    			else if ($.inArray(guess, guesses) == -1) {
				    				if (localStorage.getItem('mode') == "light"){
											clearLight();
				    				}
				    				else {
											clearDark();
				    				}

				    				guesses.push(guess);
			    					guesses = guesses.sort(sortingGuesses);
				    				localStorage.setItem('guesses', JSON.stringify(guesses));

				    				var score = 0;

				    				if (guesses.length > 5) {
				    					for (let i = 0; i < 5; i++){
				    						let guess = guesses[i];
				    						score += possWords[guess];
				    					}
				    				}
				    				else {
				    					guesses.forEach((guess) => {
				    						score += possWords[guess];
				    					})
				    				}

				    				localStorage.setItem('score', score);
									var scorePos = (74.5*score/maxPoints).toFixed(2);
									var slide = gaugeScore(score, maxPoints)[2];

									$("#scoreArrow").animate({'marginLeft': scorePos+'%'}, "slow");
									$("#slide").animate({'marginLeft': scorePos+'%'}, "slow");
									$("#tally").text(score);
									$("#wordCheck").text(10-guesses.length);
									$("#wordCheck").delay(1000).append(guess);
									$("#wordCheck").delay(1000).text(10-guesses.length);
									$("#slide").text(slide);

									$("#wordBox").text("");
									// EDITS BOX OF WORDS ON MAIN SCREEN
									if (guesses.length > 5){

										let numAdd = parseInt(localStorage.getItem('numAdd'));

										for (let i = 0; i < 5; i++){
											var guess = guesses[i];
											if (guess in topBest) {
												$("#wordBox").append("<span class='best'>"+guess+', '+possWords[guess]+'</span> ');
											}
											else if ((guess in bestWords) && (numAdd > 0)) {
												$("#wordBox").append("<span class='best'>"+guess+', '+possWords[guess]+'</span> ');
												numAdd -= 1;
											}
											else {
												$("#wordBox").append("<span class='correct'>"+guess+', '+possWords[guess]+'</span> ');
											}
										}
									}
									else {

										let numAdd = parseInt(localStorage.getItem('numAdd'));

										guesses.forEach((guess) => {
											if (guess in topBest) {
												$("#wordBox").append("<span class='best'>"+guess+', '+possWords[guess]+'</span> ');
											}
											else if ((guess in bestWords) && (numAdd > 0)) {
												$("#wordBox").append("<span class='best'>"+guess+', '+possWords[guess]+'</span> ');
												numAdd -= 1;
											}
											else {
												$("#wordBox").append("<span class='correct'>"+guess+', '+possWords[guess]+'</span> ');
											}
										});
									}

									$("#wordsSideOnly").text("");

									// EDITS SIDE BOX OF WORDS
									let i = 0;
									let numAdd = parseInt(localStorage.getItem('numAdd'));
									guesses.forEach((guess) => {
										if (i < 5){
											if (guess in topBest) {
												$("#wordsSideOnly").append("<span class='best'>"+guess+', '+possWords[guess]+' <span class="check">★</span>'+'</span> ');
											}
											else if ((guess in bestWords) && (numAdd > 0)) {
												$("#wordsSideOnly").append("<span class='best'>"+guess+', '+possWords[guess]+' <span class="check">★</span>'+'</span> ');
												numAdd -= 1;
											}
											else {
												$("#wordsSideOnly").append("<span class='correct'>"+guess+', '+possWords[guess]+' <span class="check">★</span>'+'</span> ');
											}
											i++;
										}
										else {
											$("#wordsSideOnly").append("<span class='correct'>"+guess+', '+possWords[guess]+'</span> ');
										}
									});

									$("#guessesLeft").text(''+(10-JSON.parse(localStorage.getItem('guesses')).length)+' LEFT');


				    				if (guesses.length == 10){
				    					localStorage.setItem('status', 'Done');

								        var response = gaugeScore(score, maxPoints)[0];
								        var level = gaugeScore(score, maxPoints)[1];
								        $(".shareIcon")
								        	.css('display', 'inline-block')
								        	.hide()
								        	.fadeIn("fast");
										$("#guessesLeft").text('0 LEFT');
										$("#wordCheck").text("✓");
										$(".keyBoard input").css('pointer-events', 'none');
										$("#completeOverlay").fadeIn("slow");
								        $("#overOverlay")
								        	.css('display', 'flex')
								        	.hide()
								        	.delay(1000)
								        	.fadeIn("slow");
								        $("#scoreFinal").text(response + ' You scored ' + score + ' points.');
				    				}

				    				else if (parseInt(localStorage.getItem('score')) == parseInt(localStorage.getItem('maxPoints'))){
				    					localStorage.setItem('status', 'Done');

								        var response = gaugeScore(score, maxPoints)[0];
								        var level = gaugeScore(score, maxPoints)[1];
								        $(".shareIcon")
								        	.css('display', 'inline-block')
								        	.hide()
								        	.fadeIn("fast");
										$("#guessesLeft").text('0 LEFT');
										$("#wordCheck").text("✓");
										$(".keyBoard input").css('pointer-events', 'none');
										$("#completeOverlay").fadeIn("slow");
								        $("#overOverlay")
								        	.css('display', 'flex')
								        	.hide()
								        	.delay(1000)
								        	.fadeIn("slow");
								        $("#scoreFinal").text(response + ' You scored ' + score + ' points.');
				    				}

				    			}

				    			else {
										$(".formContents").effect('shake', {times: 2, distance: 5}, 200);
				    				$("#errorMsg").stop(true, true).text("Already guessed");
				    				$("#errorMsg")
				    					.fadeIn("fast")
				    					.delay(1000)
				    					.fadeOut("fast");
				    				if (localStorage.getItem('mode') == "light"){
											timeout = setTimeout( clearLight,1300);
				    				}
				    				else {
											timeout = setTimeout( clearDark,1300);
				    				}



				    			}

				    		}

				    		else {
									$(".formContents").effect('shake', {times: 2, distance: 5}, 200);
				    			$("#errorMsg").stop(true, true).text("Invalid word");
				    			$("#errorMsg")
				    				.fadeIn("fast")
				    				.delay(1000)
				    				.fadeOut("fast");
			    				if (localStorage.getItem('mode') == "light"){
										timeout = setTimeout( clearLight,1300);
			    				}
			    				else {
										timeout = setTimeout( clearDark,1300);
			    				}
				    		}
				    	}
				    })

				$(document).keydown(
				    function(e)
				    {
				    	if ($("#completeOverlay").is(":hidden") && (e.keyCode == 13)){
					    	if (active() > 3){
					    		var guess = $('#1').text() + $('#2').text() + $('#3').text() + $('#4').text() + $('#5').text();

					    		var possWords = JSON.parse({{possWords | tojson}});
					    		var bestWords = JSON.parse({{bestWords | tojson}});

					    		if (guess in possWords) {
					    			var guesses = JSON.parse(localStorage.getItem('guesses'));

					    			console.log(localStorage.getItem('status'));

				    				if (guesses.length == 0){
					    				if (localStorage.getItem('mode') == "light"){
												clearLight();
					    				}
					    				else {
												clearDark();
					    				}


				    					guesses.push(guess);
				    					guesses = guesses.sort(sortingGuesses);
					    				localStorage.setItem('guesses', JSON.stringify(guesses));

					    				var score = 0;

					    				if (guesses.length > 5) {
					    					for (let i = 0; i < 5; i++){
					    						let guess = guesses[i];
					    						score += possWords[guess];
					    					}
					    				}
					    				else {
					    					guesses.forEach((guess) => {
					    						score += possWords[guess];
					    					})
					    				}

					    				localStorage.setItem('score', score);
										var scorePos = (74.5*score/maxPoints).toFixed(2);
										var slide = gaugeScore(score, maxPoints)[2];


										$("#scoreArrow").animate({'marginLeft': scorePos+'%'}, "slow");
										$("#slide").animate({'marginLeft': scorePos+'%'}, "slow");
										$("#tally").text(score);
										$("#wordCheck").text(10-guesses.length);
										$("#slide").text(slide);

										$("#wordBox").text("");
										// EDITS BOX OF WORDS ON MAIN SCREEN
										if (guesses.length > 5){
											let numAdd = parseInt(localStorage.getItem('numAdd'));
											for (let i = 0; i < 5; i++){
												var guess = guesses[i];
												if (guess in topBest) {
													$("#wordBox").append("<span class='best'>"+guess+', '+possWords[guess]+'</span> ');
												}
												else if ((guess in bestWords) && (numAdd > 0)) {
													$("#wordBox").append("<span class='best'>"+guess+', '+possWords[guess]+'</span> ');
													numAdd -= 1;
												}
												else {
													$("#wordBox").append("<span class='correct'>"+guess+', '+possWords[guess]+'</span> ');
												}
											}
										}
										else {
											let numAdd = parseInt(localStorage.getItem('numAdd'));
											guesses.forEach((guess) => {
												if (guess in topBest) {
													$("#wordBox").append("<span class='best'>"+guess+', '+possWords[guess]+'</span> ');
												}
												else if ((guess in bestWords) && (numAdd > 0)) {
													$("#wordBox").append("<span class='best'>"+guess+', '+possWords[guess]+'</span> ');
													numAdd -= 1;
												}
												else {
													$("#wordBox").append("<span class='correct'>"+guess+', '+possWords[guess]+'</span> ');
												}
											});
										}

										$("#wordsSideOnly").text("");

										// EDITS SIDE BOX OF WORDS
										let i = 0;
										let numAdd = parseInt(localStorage.getItem('numAdd'));
										guesses.forEach((guess) => {
											if (i < 5){
												if (guess in topBest) {
													$("#wordsSideOnly").append("<span class='best'>"+guess+', '+possWords[guess]+' <span class="check">★</span>'+'</span> ');
												}
												else if ((guess in bestWords) && (numAdd > 0)) {
													$("#wordsSideOnly").append("<span class='best'>"+guess+', '+possWords[guess]+' <span class="check">★</span>'+'</span> ');
													numAdd -= 1;
												}
												else {
													$("#wordsSideOnly").append("<span class='correct'>"+guess+', '+possWords[guess]+' <span class="check">★</span>'+'</span> ');
												}
												i++;
											}
											else {
												$("#wordsSideOnly").append("<span class='correct'>"+guess+', '+possWords[guess]+'</span> ');
											}
										});

										$("#guessesLeft").text(''+(10-JSON.parse(localStorage.getItem('guesses')).length)+' LEFT');
				    				}

					    			else if ($.inArray(guess, guesses) == -1) {
					    				if (localStorage.getItem('mode') == "light"){
												clearLight();
					    				}
					    				else {
												clearDark();
					    				}

					    				guesses.push(guess);
				    					guesses = guesses.sort(sortingGuesses);
					    				localStorage.setItem('guesses', JSON.stringify(guesses));

					    				var score = 0;

					    				if (guesses.length > 5) {
					    					for (let i = 0; i < 5; i++){
					    						let guess = guesses[i];
					    						score += possWords[guess];
					    					}
					    				}
					    				else {
					    					guesses.forEach((guess) => {
					    						score += possWords[guess];
					    					})
					    				}

					    				localStorage.setItem('score', score);
										var scorePos = (74.5*score/maxPoints).toFixed(2);
										var slide = gaugeScore(score, maxPoints)[2];

										$("#scoreArrow").animate({'marginLeft': scorePos+'%'}, "slow");
										$("#slide").animate({'marginLeft': scorePos+'%'}, "slow");
										$("#tally").text(score);
										$("#wordCheck").text(10-guesses.length);
										$("#slide").text(slide);

										$("#wordBox").text("");
										// EDITS BOX OF WORDS ON MAIN SCREEN
										if (guesses.length > 5){
											let numAdd = parseInt(localStorage.getItem('numAdd'));
											for (let i = 0; i < 5; i++){
												var guess = guesses[i];
												if (guess in topBest) {
													$("#wordBox").append("<span class='best'>"+guess+', '+possWords[guess]+'</span> ');
												}
												else if ((guess in bestWords) && (numAdd > 0)) {
													$("#wordBox").append("<span class='best'>"+guess+', '+possWords[guess]+'</span> ');
													numAdd -= 1;
												}
												else {
													$("#wordBox").append("<span class='correct'>"+guess+', '+possWords[guess]+'</span> ');
												}
											}
										}
										else {
											let numAdd = parseInt(localStorage.getItem('numAdd'));
											guesses.forEach((guess) => {
												if (guess in topBest) {
													$("#wordBox").append("<span class='best'>"+guess+', '+possWords[guess]+'</span> ');
												}
												else if ((guess in bestWords) && (numAdd > 0)) {
													$("#wordBox").append("<span class='best'>"+guess+', '+possWords[guess]+'</span> ');
													numAdd -= 1;
												}
												else {
													$("#wordBox").append("<span class='correct'>"+guess+', '+possWords[guess]+'</span> ');
												}
											});
										}

										$("#wordsSideOnly").text("");

										// EDITS SIDE BOX OF WORDS
										let i = 0;
										let numAdd = parseInt(localStorage.getItem('numAdd'));
										guesses.forEach((guess) => {
											if (i < 5){
												if (guess in topBest) {
													$("#wordsSideOnly").append("<span class='best'>"+guess+', '+possWords[guess]+' <span class="check">★</span>'+'</span> ');
												}
												else if ((guess in bestWords) && (numAdd > 0)) {
													$("#wordsSideOnly").append("<span class='best'>"+guess+', '+possWords[guess]+' <span class="check">★</span>'+'</span> ');
													numAdd -= 1;
												}
												else {
													$("#wordsSideOnly").append("<span class='correct'>"+guess+', '+possWords[guess]+' <span class="check">★</span>'+'</span> ');
												}
												i++;
											}
											else {
												$("#wordsSideOnly").append("<span class='correct'>"+guess+', '+possWords[guess]+'</span> ');
											}
										});

										$("#guessesLeft").text(''+(10-JSON.parse(localStorage.getItem('guesses')).length)+' LEFT');


					    				if (guesses.length == 10){
					    					localStorage.setItem('status', 'Done');

									        var response = gaugeScore(score, maxPoints)[0];
									        var level = gaugeScore(score, maxPoints)[1];
									        $(".shareIcon")
									        	.css('display', 'inline-block')
									        	.hide()
									        	.fadeIn("fast");
											$("#guessesLeft").text('0 LEFT');
											$("#wordCheck").text("✓");
											$(".keyBoard input").css('pointer-events', 'none');
											$("#completeOverlay").fadeIn("slow");
									        $("#overOverlay")
									        	.css('display', 'flex')
									        	.hide()
									        	.delay(1000)
									        	.fadeIn("slow");
									        $("#scoreFinal").text(response + ' You scored ' + score + ' points.');
					    				}

					    				else if (parseInt(localStorage.getItem('score')) == parseInt(localStorage.getItem('maxPoints'))){
					    					localStorage.setItem('status', 'Done');

									        var response = gaugeScore(score, maxPoints)[0];
									        var level = gaugeScore(score, maxPoints)[1];
									        $(".shareIcon")
									        	.css('display', 'inline-block')
									        	.hide()
									        	.fadeIn("fast");
											$("#guessesLeft").text('0 LEFT');
											$("#wordCheck").text("✓");
											$(".keyBoard input").css('pointer-events', 'none');
											$("#completeOverlay").fadeIn("slow");
									        $("#overOverlay")
									        	.css('display', 'flex')
									        	.hide()
									        	.delay(1000)
									        	.fadeIn("slow");
									        $("#scoreFinal").text(response + ' You scored ' + score + ' points.');
					    				}

					    			}

					    			else {
											$(".formContents").effect('shake', {times: 2, distance: 5}, 200);
					    				$("#errorMsg").stop(true, true).text("Already guessed");
					    				$("#errorMsg")
					    					.fadeIn("fast")
					    					.delay(1000)
					    					.fadeOut("fast");
					    				if (localStorage.getItem('mode') == "light"){
												timeout = setTimeout( clearLight,1300);
					    				}
					    				else {
												timeout = setTimeout( clearDark,1300);
					    				}
					    			}

					    		}

					    		else {
										$(".formContents").effect('shake', {times: 2, distance: 5}, 200);
					    			$("#errorMsg").stop(true, true).text("Invalid word");
					    			$("#errorMsg")
					    				.fadeIn("fast")
					    				.delay(1000)
					    				.fadeOut("fast");
				    				if (localStorage.getItem('mode') == "light"){
											timeout = setTimeout( clearLight,1300);
				    				}
				    				else {
											timeout = setTimeout( clearDark,1300);
				    				}
					    		}
					    	}
						}
					})
			}
		})
	</script>

	<!-- UI STUFF -->


	<script type="text/javascript">
		window.onload = function() {
			var current_url = window.location.href
			if (current_url == "https://lexgame.herokuapp.com/") {
			    window.location.href = "https://www.thelexgame.com";
			}
		}
	</script>
	<script type="text/javascript">
		function shareData() {

					var numBest = $('#wordBox').children('.best').length;

				  var score = parseInt(localStorage.getItem('score'));
				  var maxPoints = parseInt(localStorage.getItem('maxPoints'));
				  var level = shareScore(score, maxPoints,numBest)[1];
					var txt = '——Lex {{lid}}——'+level;

				  const shareData = {
					    title: 'Lex',
					    text: txt
					};

				  const btn = document.querySelector('#share');
				  const sharePara = document.querySelector('#shareDetails');

				  if (!navigator.canShare) {
					 	navigator.clipboard
							.writeText(txt)
							.then(() => {
								sharePara.textContent = 'Results copied to clipboard!';
								})
							.catch(() => {
								sharePara.textContent = 'Could not copy results.';
								})
						$("#shareOverlay")
							.css('display', 'flex')
							.hide()
							.fadeIn().delay(1000).fadeOut("fast");

					} else {
					  	navigator.share(shareData);
						};
			}
	</script>
	<!-- TIME LEFT -->
	<script type="text/javascript">
		$(document).ready(function() {
			const Countdown = (() => {

			  let nextMidnight = new Date();
			  nextMidnight.setHours(24,0,0,0);

			  const getRemainingTime = () => {
			    let now = new Date();

			    let time = (nextMidnight.getTime() - now.getTime())/1000;

			    if(time < 0) {
			      nextMidnight = new Date();
			      nextMidnight.setHours(24,0,0,0);

			      return getRemainingTime();
			    }

			    return time;
			  }

			  const parseTime = (time) => {
			    const hours = Math.floor(time/3600);
			    let rest = time-(hours*3600);
			    const minutes = Math.floor(rest/60);
			    rest = rest-(minutes*60);
			    const seconds = Math.floor(rest);
			    const milliseconds = (rest-seconds)*1000;

			    return [hours, minutes, seconds, milliseconds];
			  };

			  const formatTime = (parsedTime) => {
			      return '<span class="hours">' + parsedTime[0] + '</span><span class="hSep">:</span><span class="minutes">' + ("0" + parsedTime[1]).slice(-2) + '</span><span class="mSep">:</span><span class="seconds">' + ("0" + parsedTime[2]).slice(-2) + '</span>';
			  };

			  const els = [];
			  let timeout;

			  return (el) => {
			    els.push(el);

			    if(!timeout) {

			      const refresh = () => {
			        const parsedTime = parseTime(getRemainingTime());
			        const formattedTimes = formatTime(parsedTime);

			        for(let i = 0, iend = els.length; i < iend; i++) {
			          els[i].innerHTML = formattedTimes;
			        }

			        setTimeout(() => {
			          refresh();
			        }, parsedTime[3]);
			      };
			      refresh();

			    }
			    else el.innerHTML = formatTime(parseTime(getRemainingTime()));
			  };

			})();

			Countdown(document.getElementById('countdown1'));
			Countdown(document.getElementById('countdown2'));
		})
	</script>

	<script type="text/javascript">
		$(document).keydown(
		    function(e)
		    {

		    	if ($("#completeOverlay").is(":hidden")) {

			        if (e.keyCode == 8) {

									del();
							}
			        /*else if ( ((document.getElementById("1").value.length == 1) && (document.getElementById("2").value.length == 1) && (document.getElementById("3").value.length == 1)) && (e.keyCode == 13)) {

						$("#additionalInfo").fadeOut("fast");

						THIS IS HOW FORM WAS BEING SUBMITTED WITH ENTER
			        	$('form#letterField').submit();

						alert("guess attempted (enter)")
			        }*/

			        else if (localStorage.getItem('status') != 'Done' && (!(e.metaKey)) && (e.key >= "a" && e.key <= "z")) {

								if (timeout!=null) {
									clearTimeout(timeout);
									if (localStorage.getItem('mode') == "light"){
										clearLight();
									}
									else {
										clearDark();
									}
									timeout=null;
									$("#errorMsg").stop(true, true).fadeOut('fast');
								}

			        	if (!($("#5").text().trim().length == 1)) {

									$("#"+active()).effect('shake', {direction:'up', times: 1, distance: 2.5}, 200);
			        		if ((active() == 5)){
										$("#5").text(e.key);
										if (localStorage.getItem('mode') == "light"){
						        			document.getElementById("5").style.borderColor = "black";
						        }
				        		else {
				        			document.getElementById("5").style.borderColor = "#BDBCBC";
				        		}
			        		}

			        		else {
				        		$("#"+active()).text(e.key);
										if (localStorage.getItem('mode') == "light"){
						        	 document.getElementById(active()-1).style.borderColor = "black";
						        }
						        else {
						         	 document.getElementById(active()-1).style.borderColor = "#BDBCBC";
						        }
			        		}
			        	}

						$("#additionalInfo").fadeOut("fast");

						}
		   		}
		   	}
		);
	</script>
	<script type="text/javascript">
		$(document).keydown(
		    function(e) {
		        if (e.keyCode == 27) {
		        	$("#completeOverlay").fadeOut("fast");
		            $(".overlay").fadeOut("fast");
		            $("#additionalInfo").fadeOut("fast");
				    $(".slideIn-content").hide();
				    $("#switch").hide();
			        document.getElementById("myNav").style.width = "0%";
					//document.getElementById("myNav").style.boxShadow = "none";
		        }
		    }
		);
	</script>
	<script type="text/javascript">
		function active() {
			var active = 5;

			for (let i = 1; i < 6 ; i++) {
				if ($("#"+i).text().trim().length == 0){
					active = i;
					break;
				}
			}
			return active;
		}
	</script>
	<script type="text/javascript">
		function activeTile() {
			var currentActive = active();

			$("#additionalInfo").fadeOut("fast");

		    if (!($("#5").text().trim().length == 1)) {

				if (localStorage.getItem('mode') == "light"){
    				document.getElementById(currentActive).style.borderColor = "black";
	    		}
	    		else {
	    			document.getElementById(currentActive).style.borderColor = "#BDBCBC";
	    		}


				return currentActive;
			}
		}
	</script>
	<script type="text/javascript">
		function keyActiveTile(val) {

			if (timeout!=null) {
				clearTimeout(timeout);
				if (localStorage.getItem('mode') == "light"){
					clearLight();
				}
				else {
					clearDark();
				}
				timeout=null;
				$("#errorMsg").stop(true, true).fadeOut('fast');
			}

			var at = activeTile();
			console.log(at);
			console.log(val);

			if (!($("#5").text().trim().length == 1)) {
				$("#"+at).text(val);
				$("#"+at).effect('shake', {direction:'up', times: 1, distance: 2.5}, 200)
			}
		}
	</script>
	<script type="text/javascript">
		function del() {

			if (timeout!=null) {
				clearTimeout(timeout);
				timeout=null;
				$("#errorMsg").stop(true, true).fadeOut('fast');
			}

			var moveTo = 5;

			for (let i = 1; i < 6 ; i++) {
				if ($("#"+i).text().trim().length == 0){
					if (i == 1){
						moveTo = 1;
					}
					else {
						moveTo = i-1;
					}
					break;
				}
			}

				if (localStorage.getItem('mode') == "light"){
    				document.getElementById(moveTo).style.borderColor = "#BDBCBC";
	    		}
	    		else {
	    			document.getElementById(moveTo).style.borderColor = "#808080";
	    		}

			$("#"+moveTo).text('');

			$("#additionalInfo").fadeOut("fast");

			return moveTo;
		}
	</script>
	<script type="text/javascript">
		$(document).ready(function() {
		    $("#showYesterday").click(function(){
		        $("#completeOverlay").fadeIn("fast");
		        $("#yesterdayOverlay")
		        	.css('display', 'flex')
		        	.hide()
		        	.fadeIn("fast");
		    });
		});
	</script>
	<script type="text/javascript">
		$(document).ready(function() {
		    $("#closeYesterday").click(function(){
		        $("#completeOverlay").fadeOut("fast");
		        $("#yesterdayOverlay").fadeOut("fast");
		    });
		});
	</script>
	<script type="text/javascript">
		$(document).ready(function() {
		    $("#shareIconInner").click(function(){
		        $("#completeOverlay").fadeIn("fast");
		        $("#overOverlay")
		        	.css('display', 'flex')
		        	.hide()
		        	.fadeIn("fast");
		    });
		});
	</script>
	<script type="text/javascript">
		$(document).ready(function() {
		    $("#showInfo").click(function(){
		        $("#completeOverlay").fadeIn("fast");
		        $("#infoOverlay")
		        	.css('display', 'flex')
		        	.hide()
		        	.fadeIn("fast");
		    });
		});
	</script>
	<script type="text/javascript">
		$(document).ready(function() {
		    $("#closePlayInfo").click(function(){
		        $("#completeOverlay").fadeOut("fast");
		        $("#infoOverlay").fadeOut("fast");
		    });
		});
	</script>
	<script type="text/javascript">
		$(document).ready(function() {
		    $("#closeOverInfo").click(function(){
		        $("#completeOverlay").fadeOut("fast");
		        $("#overOverlay").fadeOut("fast");
		    });
		});
	</script>
	<script type="text/javascript">
		$(document).ready(function() {
		    $("#moreID").click(function(){
		        $("#additionalInfo")
		        	.toggle()
		        	.hide()
		        	.fadeIn("fast");
		    });
		});
	</script>
	<script type="text/javascript">
		$(document).ready(function() {
		    $("#closeAllInfo").click(function(){
		        $("#additionalInfo")
		        	.toggle()
		        	.show()
		        	.fadeOut("fast");
		    });
		});
	</script>
	<script type="text/javascript">
		$(document).ready(function() {
		    $("#done").click(function(){
		    	$("#completeOverlay").fadeIn("fast");
		        $("#doneOverlay")
		        	.css('display', 'flex')
		        	.hide()
		        	.fadeIn("fast");
		    });
		});
	</script>
	<script type="text/javascript">
		$(document).ready(function() {
		    $("#notDone").click(function(){
		        $("#completeOverlay").fadeOut("fast");
		        $("#doneOverlay").fadeOut("fast");
		    });
		});
	</script>
	<script type="text/javascript">
		$(document).ready(function() {
			$("#errorMsg").delay(1500).fadeOut('slow');
		})
	</script>

	<script type="text/javascript">
		function openNav() {
			if (Math.min(window.screen.width, window.screen.height) < 768) {
		  		document.getElementById("myNav").style.width = "98%";
		  		//document.getElementById("myNav").style.boxShadow = "0px 0px 6px 2px #CBCBCB";
			}
			else {
				document.getElementById("myNav").style.width = "25%";
		  		//document.getElementById("myNav").style.boxShadow = "0px 0px 6px 2px #CBCBCB";
			}
			$(".slideIn-content").delay(50).fadeToggle();
			$("#switch").delay(50).fadeIn();
		}
	</script>
	<script type="text/javascript">
		$(document).ready(function() {
		    $("#closeNav").click(function(){

		    	$(".slideIn-content").toggle();
		    	$("#switch").hide();

		        document.getElementById("myNav").style.width = "0%";
				//document.getElementById("myNav").style.boxShadow = "none";
		    });
		});
	</script>
</body>
</html>
